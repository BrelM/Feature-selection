
// PageRank-based attribute selection pseudo code


Algorithm pagerankloop

    Inputs:
        G(V, E, W): graph
        C: attributes vector, 
        alpha: float, 
        k: int,
        pen_method: penalization method

    Outputs:
        S: by relevance sorted attributes vector


    Start

        S = init(k)
        p = init(0) // Personalization vector

        for i from 0 to k do

            // Sorting the nodes of the graph
            pagerank_scores, p = pagerank(G, alpha, p)

            // Selection of the feature associated to the first classed node (highest PageRank score)
            S[i] = select_first_feature(pagerank_scores, C)

            // Updating the personalization vector based on the chosen method
            node = select_first_node(pagerank_scores, V)

            if pen_method == "delete"
                // Strategy 1: Remove the selected node from the graph
			    // along with the connected edges
                remove_node(V, node)
                remove_associated_pvalue(p, node)

            else
                // Strategy 2: update the weights of the edges connected to the selected node
                // along with the connected nodes and thus, the personalization vector
                idx = index(node, V)
                
                s = 0
                for j from 0 to m do

                    if j != idx:
                        p[j] -= W[idx, j]
                        s += p[j] # Sum for normalization
                    endif
                endfor

                p[idx] = 0

                for j from 0 to m do
                    if j != idx:
                        p[j] /= s
                    endif
                endfor

            endif

        endfor
    
    End


